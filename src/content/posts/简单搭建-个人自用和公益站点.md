---
title: 搭建个人 API 代理站点：Cursor API + One API 完全指南
published: 2025-01-18
description: 想要搭建自己的 API 代理站点？本教程将带你从零开始，利用 Cursor API 和 One API 搭建一个稳定可用的代理服务，包含完整的环境配置、隧道搭建和令牌管理，让你轻松实现个人使用或公益分享
image: './FILES/简单搭建-个人自用和公益站点.assets/img-20250118205116.png'
tags: ['Cursor', 'API', 'ngrok', 'one-api', '代理']
category: '技术教程'
draft: false 
lang: ''
---

# 从零开始：搭建个人 API 代理服务完全指南

> 本文将详细介绍如何搭建一个稳定可用的 API 代理服务，包括基础概念讲解和实操步骤，适合新手入门。

## 前期准备

在开始动手之前，我们需要准备以下工具：
1. Cursor API 程序包：[下载地址](https://raw.githubusercontent.com/damoshen123/curapi/refs/heads/main/cursor-api-main4.rar)![Img](./FILES/简单搭建%20个人自用和公益站点.assets/img-20250115140538.png)
2. ngrok 内网穿透工具
3. One API 管理程序

## 核心概念详解

在开始实操之前，让我们先了解几个关键概念，这将帮助你更好地理解整个搭建过程。

### 1. Cursor API 代理服务
这是整个系统的核心组件，它能将 Cursor 编辑器的 AI 能力转换为标准的 OpenAI API 格式。简单来说，它就像一个翻译官，让其他应用能够轻松调用 Cursor 的 AI 能力。

### 2. 网络隧道服务
想象一下，你的电脑就像一个封闭的房间，而网络隧道就是连接这个房间和外界的通道。我们使用 ngrok 这个工具来创建这样的通道，让外部网络能够访问到你的本地服务。

### 3. One API 管理平台
这是一个强大的 API 管理工具，它能帮你统一管理和分发 API 接口，就像一个智能管家，帮你打理所有的 API 相关事务。

## 实操步骤

### 第一步：配置 Cursor API 服务

在开始具体配置前,我们需要先准备好网络环境。首先访问 [ngrok官网](https://dashboard.ngrok.com/) 获取配置信息:
![ngrok配置界面](./FILES/简单搭建-个人自用和公益站点.assets/img-20250123002507.png)

接下来按顺序进行如下操作:

1. **启动代理服务**
   - 运行 `cur代理.bat` 文件
   - 默认使用 3000 端口
   
2. **端口冲突解决**
   如果默认端口被占用(比如下图),需要修改端口:
   ```javascript
   // 打开 src/index.js 文件
   // 找到端口配置
   const port = 3000
   // 修改为新端口
   const port = 3002
   ```
   ![端口占用示例](./FILES/简单搭建%20个人自用和公益站点.assets/img-20250115141736.png)
   这里看到我的3000端口，正在启动LLOneBot server，因此我需要修改端口为3002
   > 💡 小贴士：
   > - 可以使用任何未被占用的端口
   > - 记住修改后的端口号,后面配置要用
   > - 建议使用 3000-5000 之间的端口

### 第二步：配置 One API 服务

1. **启动服务**
   - 运行 `打开Oneapi.bat`
   - 默认端口为 3333

2. **自定义端口** (可选)
   - 如需修改端口,编辑 `打开Oneapi.bat`
   - 找到端口配置项进行修改

3. **启动隧道**
   - 确保服务正常运行
   - 记录运行端口号

### 第三步：配置网络隧道（不使用OneAPI,直接通过ngrok隧道，然后填写Cookie）

1. **启动 ngrok**
   - 打开 ngrok 程序
   - 确保已登录账号

2. **创建隧道**
   ```bash
   # 替换为你的 Cursor API 端口
   ngrok http 3002
   ```
   ![隧道创建成功](./FILES/简单搭建%20个人自用和公益站点.assets/img-20250115142015.png)

   > ⚠️ 重要提示：
   > - 端口号必须与 Cursor API 服务端口一致
   > - 保存生成的隧道地址
   > - 确保隧道状态为在线

### 第四步：酒馆配置

在酒馆中添加新的 API 渠道:

1. **必填信息**
   - 隧道地址: `你的隧道地址/v1`，这里采用OneAPI的隧道地址
   - API密钥: 填入 WorkosCursorSession 值
   - 选择模型: 根据需求选择合适的模型

> 🌟 配置建议:
> 1. 所有服务都要确保正常运行
> 2. 记录好所有端口和地址
> 3. 遇到问题先检查端口是否冲突
> 4. 保存好所有配置信息

## 常见问题解决

#### 1. 状态检查问题
如果遇到 `Status check bypassed`，不用担心，只要测试消息返回 200 状态码就是正常的。

#### 2. 404 错误解决
- 原因：通常是端口冲突导致
- 解决：修改 Cursor API 的端口号

#### 3. 空回复问题修复
- 检查 cookie 格式，确保使用 `%3A` 而不是双冒号
- 推荐使用 [Cookie Editor](https://chromewebstore.google.com/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm) 插件提取 cookie

## 进阶配置：批量账号模式

如果你需要更多账号，可以：
1. 使用 [CursorRegister](https://github.com/JiuZ-Chn/CursorRegister) 项目
2. 通过工作流自动创建 Cursor 账号
3. 获取 WorkosCursorSession 信息

## 最后一步

完成配置后，你就可以：
1. 启动 One API 隧道服务
2. 创建访问令牌
3. 使用隧道地址和 sk 开头的令牌开始使用服务

> 🌟 小提示：如果需要更稳定的服务，建议配置自己的域名，具体方法可参考原教程。

## 参考资源
- [原始教程](https://gxcgf4l6b2y.feishu.cn/docx/GIjidWbiyoSblfxLZ3Fcbc3Wnqg)
- [Cookie Editor 插件](https://chromewebstore.google.com/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm)
- [问题讨论](https://discord.com/channels/1134557553011998840/1327109779310510110)